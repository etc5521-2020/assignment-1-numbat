---
title: "ETC5521 Assignment 1"
subtitle: "Your title"
team: [FILL]
author:
  - [FILL]
  - [FILL]
date: "`r Sys.Date()`"
output: 
  html_document
---

[This assignment is for ETC5521 Assignment 1 by Team `r rmarkdown::metadata$team` comprising of `r knitr::combine_words(rmarkdown::metadata$author)`.]{style="color:#006DAE;"}

```{r setup, include = FALSE}
library(tidyverse)
library(visdat)
library(naniar)

knitr::opts_chunk$set(echo = FALSE, message = FALSE, fig.align = 'center')
```


# Introduction and motivation

[FILL] Give the bigger picture of the data, and inspire the reader to learn more about the problem by reading your analysis. 

# Data description
```{r}
passwords <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-14/passwords.csv')
 
```

Based upon the motivations discussed above, the following research questions were formulated. The primary subject of interest was:

> What type of passwords do most people use? 

Once this exploration area was established, three questions were composed to parameterise the proceeding analysis. They were:

1.	What are the most commonly used passwords?
2.	How strong are most peopleâ€™s passwords?
3.	What are the strongest types of passwords?

In order to address these areas and explore the field in greater depth, data was sourced from the book *Information is Beautiful* (2014). This contained information on 507 passwords derived from online databases *Skullsecurity* and *DigiNinja* collected in 2014. The data was provided in a tidy format and was read into R Studio in a csv format directly from the GitHub repository provided by *Tidy Tuesday* (2020) using the *readr* (2018) package. The data contained the following variables:

- rank: popularity of password
- password: actual text of the password
- category: password type category
- value: time to crack password by online guessing
- time_unit: unit of time for corresponding value
- offline_crack_sec: time to crack offline in seconds
- rank_alt: alternative value for rank (same value as rank in all cases)
- strength: relative strength of password from 1 to 10
- font_size: used externally to create graphic for Knowledge is Beautiful (2014)

A visualisation of the data structure can be seen below in Figure 1 using the *visdat* package (2017).

```{r structure, fig.cap = "Initial Data Structure"}
vis_dat(passwords)
```

This graphic highlighted two areas that the data needed to be altered. Firstly, the variable category was recoded to a factor variable rather than a character as this was determined to be a categorical variable. Secondly, there appeared to be some missing observations in the dataset. This was examined further in Figure 2, produced using the *naniar* (2020) package, which showed that all these values were evenly distributed across the tail end of the data set.
```{r missing, fig.cap = "Missing Data Values"}
vis_miss(passwords)
```


On further investigation there appeared to be 7 blank rows at the end of the dataset. These observations were subsequently removed using *dplyr* (2020) as they may have negatively impacted the proceeding analysis and provided no tangible value. The final resulting data frame had 500 observations of 9 variables.

```{r cleaneddata}
clean_passwords <- passwords %>%
  mutate(category = as.factor(category)) %>%
  filter(!is.na(rank))
```


# Analysis and findings

[FILL] Should include at least one plot or numerical summary for each of your questions, that helps the reader arrive at an answer. You should also write paragraphs describing the methods, summaries and findings.


## How strong are the common passwords?

The strength of these common passwords is an interesting feature to explore as variable *strength* is relative to the passwords in the dataset. Since these are commonly used passwords, their strength is expected to be less and easier to crack. The following analysis has been done to explore the dataset,to determine how strong the passwords are.Through out the analysis , the variable *offline_crack_sec* (the time taken to crack the password by offline guessing) is considered instead of the variable  *value* , which depicts the time taken to crack the password by online guessing as both of these values are proportional to each other and the results remain the same while comparisons between passwords. 

```{r initial,echo=FALSE}
  strong <- clean_passwords%>% 
  filter(!is.na(rank)) %>%
   mutate(meter = case_when(strength >=0 & strength <4 ~ "weak", #categorising strength 
                                   strength >=4 & strength < 6 ~ "medium",
                                   strength >=6 & strength < 8 ~ "strong",
                                   strength >=8 & strength <=10 ~ "very strong",
                                   strength >10 ~ "takes time to crack"),
                                   meter=as.factor(meter)) %>% 
  mutate(online_crack_sec = case_when(time_unit == "seconds" ~ value, # conversion of online cracking time into seconds. 
                             time_unit == "minutes" ~ value * 60,
                             time_unit == "hours" ~ value * 60 * 60,
                             time_unit == "days" ~ value * 60 * 60 * 24,
                             time_unit == "weeks" ~ value * 60 * 60 * 24 * 7,
                             time_unit == "months" ~ value * 60 * 60 * 24 * 365/12,
                             time_unit == "years" ~ value * 60 * 60 * 24 * 365))



```

```{r , eval=FALSE}
install.packages("devtools")
devtools::install_github("gadenbuie/ggpomological")
```


```{r plo, warning=FALSE, echo=FALSE, message=FALSE , fig.cap="43.6 % of the passwords are relatively high in strength"}
library(ggplot2)
library(ggpomological) 
library(tidyverse)
library(plotly)
library(ggplot2)
library(ggridges)
library(scales)
library(gganimate)
library(ggthemes)
library(crosstalk)
library(bookdown)
plo <- strong %>%
  group_by(meter) %>%  #proportion of the strength category 
  count(meter) %>%
  mutate(prop = n / nrow(strong) * 100) %>%
  arrange(desc(prop))
 

plot <- plot_ly(plo,
        labels = ~ meter, #pie chart 
        values = ~ prop,
        type = 'pie') %>%
  layout(
    title = 'How strong are most passwords?',
    xaxis = list(
      showgrid = FALSE,
      zeroline = FALSE,
      showticklabels = FALSE
    ),
    yaxis = list(
      showgrid = FALSE,
      zeroline = FALSE,
      showticklabels = FALSE
    )
  )
plot
```

In the above figure, it can be seen that about 43.6% of the commonly used passwords are passwords with strength between 8-10 on scale of 1-10 with 10 being the highest quality among these passwords. 

```{r rankings}

options(scipen=999)
 ranking <- strong %>% 
  head(10) %>%
ggplot(aes(y= password, x= offline_crack_sec,color=password))+
  geom_point() +
  
  geom_text(aes(label= password,size=-rank),nudge_x = 0.18,nudge_y = -0.3)+ 
   xlim(0,2.5)+
  scale_color_gdocs() + theme_bw() +
  theme(legend.position="none")  + 
   theme(axis.title.y = element_blank(),axis.text.y=element_blank(),
        axis.ticks.y=element_blank()) +
  ggtitle("Time to crack the 10 most common passwords")
ggplotly(ranking)

```



> What are the strongest types of passwords?


```{r, fig.height= 6}

 p <- ggplot(strong, aes(y=category, x= strength,fill=category))+
                
  
geom_density_ridges(quantile_lines = TRUE, quantiles=2,alpha = 0.5,scale=0.96)+ 
  
  scale_y_discrete(expand = c(0.1, 0.2)) +
  theme_ridges(grid = FALSE, center = TRUE) +
    scale_fill_tableau()+
  
   
   geom_text(data = strong %>% group_by(category) %>% summarize(strength = median(strength)) %>% 
               filter((category !="animal")), 
             aes(label=round(strength,digits = 1)), position = position_nudge(y=-0.15),check_overlap = TRUE,
             color = "black")+ 
   
   geom_text(data = strong %>% group_by(category) %>% summarize(strength = median(strength)) %>% filter(category=="animal"), aes(label=paste0("median = ",round(strength,digits = 2))), position = position_nudge(y =-0.2), color = "black") +

theme_bw() +
   theme(legend.position="none")  + 
   theme(axis.title.y = element_blank()) + 
   xlab("Strength") + ylab("Password Category") +
   ggtitle("Which category makes a better password?")+
   theme(plot.title = element_text(hjust = 0.5))
p



```

> How easy is it to crack your password? 

```{r}
strong %>% 
  group_by(category) %>%
  summarise(average_time=mean(offline_crack_sec)) %>% 
   ggplot(aes(x=category, y= average_time,color=category))+
  geom_point(alpha = 2, size = 2) +
  geom_text(aes(label= category),nudge_y = 0.25,check_overlap = TRUE)+
  scale_color_gdocs() +
  theme_bw() +
  theme(legend.position="none")  + 
   theme(axis.text.x=element_blank(),
        axis.ticks.x=element_blank())
  

```


```{r , fig.height=6}

time_strength <- strong %>% 
  ggplot(aes(x=(strength), y= offline_crack_sec,color=category))+
  geom_point(alpha = 2, size = 2) +
  scale_color_viridis_d() +
theme_bw() +
   xlab("Relative Strength") +
  ylab("Time to crack,(s)") +
  ggtitle("")
ggplotly(time_strength)
```
```{r time}

time <-  strong %>% arrange(desc(offline_crack_sec)) %>% 
  head(10) %>% 
  ggplot(aes(y= fct_reorder(password,offline_crack_sec), x= offline_crack_sec,color=password))+
  geom_point() +
 theme_bw(base_size = 10)+
  geom_text(aes(label= password,size=0.3),nudge_x = 0.8,nudge_y = -0.3)+
  scale_color_gdocs() + 
  scale_x_continuous(expand = c(0,2))+ 
 
  theme(legend.position="none")  + 
   theme(axis.title.y = element_blank(),axis.text.y=element_blank(),
        axis.ticks.y=element_blank()) +
  ggtitle("Top 10 common passwords that takes time to crack") 


strengthgg <- strong %>% arrange(desc(strength)) %>% 
  head(10) %>% ggplot(aes(y= fct_reorder(password,strength), x= strength,color=password))+
  geom_point() +
  theme_bw(base_size = 10)+
  geom_text(aes(label= password,size=0.3),nudge_x = 0.8,nudge_y = -0.3)+
  scale_color_gdocs() + 
  scale_x_continuous(expand = c(0,2))+ 
 
  theme(legend.position="none")  + 
   theme(axis.title.y = element_blank(),axis.text.y=element_blank(),
        axis.ticks.y=element_blank()) +
  ggtitle("Top 10 passwords with high strength") 

bscols(ggplotly(time),
       ggplotly(strengthgg),widths=8)


```


# References
